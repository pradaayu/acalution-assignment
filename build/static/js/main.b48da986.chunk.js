(this["webpackJsonpacalution-assignment"]=this["webpackJsonpacalution-assignment"]||[]).push([[0],{110:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),a=c(29),r=c.n(a),i=(c(82),c(22)),l=c(8),o=c(40),j=c(61),d=c(9),b=c(77),h=c(49),u=c(16),O=c(75),x=c(23),m=c(24),v=Object(n.createContext)({handleClickCart:function(){return null},handleClickBookmark:function(){return null},handleCloseBookmark:function(){return null},handleClose:function(){return null},visibleModal:!1,visibleModalBookmark:!1,productName:"",countItem:0}),g=c(1),p=function(){var e=Object(l.g)().pathname,t=Object(n.useContext)(v).countItem,c=Object(l.f)(),s=function(){c.goBack()};return Object(g.jsx)("div",{style:{marginBottom:"1rem"},children:Object(g.jsxs)(j.a,{fixed:"top",style:{backgroundColor:"#242424",justifyContent:"center"},children:[Object(g.jsx)("div",{style:{textAlign:"left",position:"relative",left:"-5vw"},children:e.includes("product")?Object(g.jsx)(u.a,{onClick:s,variant:"link",children:Object(g.jsx)(x.a,{icon:m.a,color:"#CC962C",size:"lg"})}):Object(g.jsx)(u.a,{variant:"link",children:Object(g.jsx)(x.a,{icon:m.b,color:"white",size:"lg"})})}),Object(g.jsx)(j.a.Brand,{children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)("img",{style:{height:"23px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAgAgMAAADf85YXAAAADFBMVEX//wDHn0nIoErHoEo3hQKbAAAABHRSTlMBTab61lgfAQAAAPxJREFUGBkFwbGRkEAAAMCFm5GAgDEzuw6eCgSKeGNLsAGRKwyVEq4EAgu44AJ+hn/cBSwAvEKb4PMr7BAyzM8/rNCdMD9PYoahwN38LUSIF1Sf3hkSxh1tYVv0B6YV4SRmIWOf0WVCEQquiOGgqVSaOiTigpuLUPqDEVZWuhwyv2Bioj9CYYcXRmJqKheMDMnIpakQ6Q8Tv4UTIl32k0mXYSScbkb9AS80panEZUgw4WoLfRrBV+zhpMsTuDH1B+FcoakYh0RbLggF8fuCtwpDxvABf8oXbAu6d9jytmg/INwwH+ObrUJbIabwPE8CBQZ+PBdwQo9vgAUawH8ZwGPET8bD/wAAAABJRU5ErkJggg==",alt:"logo"}),Object(g.jsx)("div",{className:"ml-1",style:{color:"white",fontSize:"14px"},children:"WINE.DELIVERY"})]})}),Object(g.jsx)(b.a,{style:{width:"50vw",justifyContent:"center"},inline:!0,children:Object(g.jsxs)(d.a,{style:{background:"#3A3A3A"},children:[Object(g.jsx)(h.a,{type:"text",style:{background:"#3A3A3A",border:"none",width:"calc(50vw - 150px)"},placeholder:"Search in Wine.Delivery"}),Object(g.jsx)(u.a,{style:{color:"#CC962C"},type:"link",variant:"link",children:"SEARCH"})]})}),Object(g.jsxs)(o.a,{className:"align-middle",style:{color:"white",position:"relative",right:"-5vw"},children:[Object(g.jsx)(o.a.Link,{children:Object(g.jsx)("div",{className:"mr-3 pt-2",style:{color:"white",fontSize:"14px"},children:"SIGN UP"})}),Object(g.jsx)(o.a.Link,{children:Object(g.jsx)("div",{className:"mr-3 pt-2",style:{color:"white",fontSize:"14px"},children:"LOG IN"})}),Object(g.jsx)(o.a.Link,{children:Object(g.jsx)("div",{style:{color:"white"},children:Object(g.jsxs)(u.a,{variant:"flat",children:[Object(g.jsx)(x.a,{icon:m.d,color:"white",size:"1x"}),t>0?Object(g.jsx)("span",{className:"bg-secondary",children:Object(g.jsx)(O.a,{children:t})}):""]})})})]})]})})},C=c(7),f=function(e){var t=e.handleClickButton,c=e.textSize;return Object(g.jsx)(u.a,{onClick:t,variant:"flat",className:"py-0",style:{backgroundColor:"#CC962C",borderColor:"transparent",fontSize:c,color:"white",height:"42px"},children:"ADD TO CART"})},k=function(e){var t=e.handleClickButton;return Object(g.jsx)(u.a,{onClick:t,variant:"flat",children:Object(g.jsx)(x.a,{icon:m.c,color:"#CC962C",size:"2x"})})},y=c(34),S=c.n(y),N=c(62),A=c(52),w=c(53),B=c.n(w),M="https://zax5j10412.execute-api.ap-southeast-1.amazonaws.com/dev/api/product",E=function(e){var t=Object(n.useState)([]),c=Object(C.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(0),i=Object(C.a)(r,2),l=i[0],o=i[1],j=Object(n.useState)(!1),d=Object(C.a)(j,2),b=d[0],h=d[1],u=Object(n.useState)(!1),O=Object(C.a)(u,2),x=O[0],m=O[1],v=Object(n.useState)(!1),g=Object(C.a)(v,2),p=g[0],f=g[1],k=Object(n.useState)(""),y=Object(C.a)(k,2),w=y[0],E=y[1],z=Object(n.useState)(!1),D=Object(C.a)(z,2),F=D[0],T=D[1];Object(n.useEffect)((function(){L(e)}),[e]);var L=function(){var e=Object(A.a)(S.a.mark((function e(t){var c,n,s;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),f(!1),e.prev=2,c={page:t},e.next=6,B.a.get("".concat(M,"/list?page=").concat(c.page));case 6:200===(n=e.sent).status&&(s=n.data.value.products,o(Math.ceil(n.data.value.totalCount/20)),a((function(e){return[].concat(Object(N.a)(e),Object(N.a)(s))})),T(t!==l),m(!1)),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(2),f(!0),E(e.t0),h(!0),m(!1);case 16:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}();return{productList:s,handleCloseError:function(){return h(!1)},visibleModalError:b,errorMessage:w,loading:x,error:p,loadMore:F,totalPage:l}},z=function(){var e=Object(n.useState)(!1),t=Object(C.a)(e,2),c=t[0],s=t[1],a=Object(n.useState)(!1),r=Object(C.a)(a,2),i=r[0],l=r[1],o=Object(n.useState)(""),j=Object(C.a)(o,2),d=j[0],b=j[1];return{handleClickCart:function(e,t){t.preventDefault(),b(e),s(!0)},visibleModal:c,handleClose:function(){return s(!1)},visibleModalBookmark:i,handleClickBookmark:function(e,t){t.preventDefault(),b(e),l(!0)},handleCloseBookmark:function(){return l(!1)},productName:d}},D=c(18),F=c(31),T=c(35),L=function(e){var t=e.visibleModal,c=e.handleClose,n=e.message,s=e.productName,a=e.isSuccess;return Object(g.jsx)(g.Fragment,{children:Object(g.jsxs)(T.a,{show:t,onHide:c,children:[Object(g.jsx)(T.a.Header,{closeButton:!0,children:Object(g.jsx)(T.a.Title,{children:a?"Success":"Error"})}),Object(g.jsx)(T.a.Body,{children:a?"".concat(s," ").concat(n):"".concat(n)}),Object(g.jsx)(T.a.Footer,{children:Object(g.jsx)(u.a,{variant:"secondary",onClick:c,children:"Close"})})]})})},I=function(){var e=Object(n.useState)(1),t=Object(C.a)(e,2),c=t[0],s=t[1],a=Object(n.useRef)(),r=E(c),l=r.productList,o=r.errorMessage,j=r.visibleModalError,b=r.handleCloseError,h=r.loading,O=r.error,x=r.loadMore,m=(r.totalPage,z()),v=m.productName,p=m.handleClickCart,y=m.handleClickBookmark,S=m.visibleModal,N=m.visibleModalBookmark,A=m.handleClose,w=m.handleCloseBookmark,B=Object(n.useCallback)((function(e){h||(a.current&&a.current.disconnect(),a.current=new IntersectionObserver((function(e){e[0].isIntersecting&&x&&s((function(e){return e+1}))})),e&&a.current.observe(e))}),[h,x]);return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(d.a,{className:"justify-content-md-center",children:[l.map((function(e,t){return l.length===t+1?Object(g.jsx)(D.a,{ref:B,value:e,md:4,sm:12,children:Object(g.jsx)(i.b,{to:"product/".concat(e.id),children:Object(g.jsxs)(d.a,{className:"mb-5",children:[Object(g.jsx)(D.a,{className:"justify-content-md-center",md:3,children:Object(g.jsx)("div",{children:Object(g.jsx)("img",{style:{minWidth:"80px"},className:"img-fluid",src:e.image,alt:"bottle"})})}),Object(g.jsxs)(D.a,{children:[Object(g.jsxs)("div",{style:{height:"160px"},children:[Object(g.jsxs)("div",{style:{height:"120px",overflow:"hidden"},children:[Object(g.jsxs)("div",{className:"h5",style:{color:"#842529"},children:[e.name," ",0!==e.vintageYear?e.vintageYear:""]}),Object(g.jsxs)("div",{style:{color:"#313131"},children:[e.type," | ",e.grapeVarietes]}),Object(g.jsx)("div",{style:{color:"#313131"},children:0===e.vintageYear?"Non Vintage":""}),Object(g.jsxs)("div",{style:{color:"#313131"},children:[e.country,", ",e.region]})]}),Object(g.jsxs)(d.a,{className:"mt-2",style:{height:"55px"},children:[Object(g.jsx)(D.a,{md:7,className:"text-left",children:Object(g.jsxs)("div",{style:{color:"#242424"},className:"h5",children:["S$",e.price]})}),e.qty<=5?Object(g.jsx)("div",{className:"text-center py-1 mt-n3",style:{backgroundColor:"#CC962C",color:"white",borderRadius:"50%",fontSize:"12px",height:"50px",width:"50px"},children:Object(g.jsxs)("span",{children:[e.qty,Object(g.jsx)("br",{}),"Left"]})}):""]})]}),Object(g.jsxs)(d.a,{className:"ml-1",children:[Object(g.jsx)(f,{handleClickButton:function(t){return p(e.name,t)},textSize:"12px"}),Object(g.jsx)(k,{handleClickButton:function(t){return y(e.name,t)}})]})]})]})})},t):Object(g.jsx)(D.a,{value:e,md:4,sm:12,children:Object(g.jsx)(i.b,{to:"product/".concat(e.id),children:Object(g.jsxs)(d.a,{className:"mb-5",children:[Object(g.jsx)(D.a,{className:"justify-content-md-center",md:3,children:Object(g.jsx)("div",{children:Object(g.jsx)("img",{style:{minWidth:"80px"},className:"img-fluid",src:e.image,alt:"bottle"})})}),Object(g.jsxs)(D.a,{children:[Object(g.jsxs)("div",{style:{height:"160px"},children:[Object(g.jsxs)("div",{style:{height:"120px",overflow:"hidden"},children:[Object(g.jsxs)("div",{className:"h5",style:{color:"#842529"},children:[e.name," ",0!==e.vintageYear?e.vintageYear:""]}),Object(g.jsxs)("div",{style:{color:"#313131"},children:[e.type," | ",e.grapeVarietes]}),Object(g.jsx)("div",{style:{color:"#313131"},children:0===e.vintageYear?"Non Vintage":""}),Object(g.jsxs)("div",{style:{color:"#313131"},children:[e.country,", ",e.region]})]}),Object(g.jsxs)(d.a,{className:"mt-2",style:{height:"55px"},children:[Object(g.jsx)(D.a,{md:7,className:"text-left",children:Object(g.jsxs)("div",{style:{color:"#242424"},className:"h5",children:["S$",e.price]})}),e.qty<=5?Object(g.jsx)("div",{className:"text-center py-1 mt-n3",style:{backgroundColor:"#CC962C",color:"white",borderRadius:"50%",fontSize:"12px",height:"50px",width:"50px"},children:Object(g.jsxs)("span",{children:[e.qty,Object(g.jsx)("br",{}),"Left"]})}):""]})]}),Object(g.jsxs)(d.a,{className:"ml-1",children:[Object(g.jsx)(f,{handleClickButton:function(t){return p(e.name,t)},textSize:"12px"}),Object(g.jsx)(k,{handleClickButton:function(t){return y(e.name,t)}})]})]})]})})},t)})),Object(g.jsx)("div",{children:O&&Object(g.jsx)(L,{visibleModal:j,handleClose:b,message:o,productName:"",isSuccess:!1})})]}),h&&Object(g.jsxs)(d.a,{className:"text-center justify-content-center",children:[Object(g.jsx)(F.a,{animation:"grow"}),Object(g.jsx)(F.a,{animation:"grow"}),Object(g.jsx)(F.a,{animation:"grow"})]}),1===c&&x?Object(g.jsx)(d.a,{className:"text-center justify-content-center",children:Object(g.jsx)(u.a,{variant:"flat",children:"Load More"})}):"",Object(g.jsx)(L,{visibleModal:N,handleClose:w,message:"is bookmarked",productName:v,isSuccess:!0}),Object(g.jsx)(L,{visibleModal:S,handleClose:A,message:"is added to cart",productName:v,isSuccess:!0})]})},R=function(){return Object(g.jsx)(g.Fragment,{children:Object(g.jsx)("div",{children:Object(g.jsxs)("div",{children:[Object(g.jsx)(p,{}),Object(g.jsx)(d.a,{style:{justifyContent:"center",marginTop:"92px"},children:Object(g.jsx)(D.a,{md:9,children:Object(g.jsx)(I,{})})})]})})})},Y=c(63),V=function(){var e=Object(l.h)().id,t=Object(n.useState)({}),c=Object(C.a)(t,2),s=c[0],a=c[1],r=Object(n.useState)(!1),i=Object(C.a)(r,2),o=i[0],j=i[1],d=Object(n.useState)(!1),b=Object(C.a)(d,2),h=b[0],u=b[1],O=Object(n.useState)(!1),x=Object(C.a)(O,2),m=x[0],v=x[1],g=Object(n.useState)(""),p=Object(C.a)(g,2),f=p[0],k=p[1];Object(n.useEffect)((function(){y(e)}),[]);var y=function(){var e=Object(A.a)(S.a.mark((function e(t){var c,n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,e.next=4,B.a.get("".concat(M,"/").concat(t));case 4:200===(c=e.sent).status&&(n=c.data,a(n.value),j(!1)),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(1),v(!0),k(e.t0),u(!0),j(!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return{productDetail:s,loading:o,error:m,errorMessage:f,visibleModalError:h,handleCloseError:function(){return u(!1)}}},P=function(){var e=V(),t=e.productDetail,c=e.loading,s=e.error,a=e.errorMessage,r=e.visibleModalError,i=e.handleCloseError,l=Object(n.useContext)(v),o=l.productName,j=l.handleClickCart,b=l.handleClickBookmark,h=l.visibleModal,u=l.visibleModalBookmark,O=l.handleClose,p=l.handleCloseBookmark;return Object(g.jsxs)(Y.a,{children:[Object(g.jsxs)(d.a,{className:"p-3 mx-5",children:[Object(g.jsx)(D.a,{className:"text-center align-middle",md:3,lg:3,children:Object(g.jsx)("img",{style:{width:"60%"},src:t.image})}),Object(g.jsxs)(D.a,{md:9,lg:9,children:[Object(g.jsx)("div",{className:"h3",children:t.name}),Object(g.jsxs)("div",{className:"h5",children:[t.grapeVarieties,", ",0===t.vintageYear?"":t.vintageYear]}),Object(g.jsx)("div",{className:"my-4",children:t.qty<=5&&t.qty>0?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x.a,{icon:m.e,color:"#CC962C",size:"2x"}),Object(g.jsx)("div",{style:{fontSize:"12px"},children:"".concat(t.qty," BOTTLES LEFT")})]}):0===t.qty?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(x.a,{icon:m.e,color:"#CC962C",size:"2x"}),Object(g.jsx)("div",{style:{fontSize:"12px"},children:"OUT OF STOCK"})]}):""}),Object(g.jsxs)(d.a,{className:"mb-4",children:[Object(g.jsx)(D.a,{children:Object(g.jsxs)("div",{className:"h5",children:["S$ ",t.price]})}),Object(g.jsx)(D.a,{children:Object(g.jsxs)(d.a,{children:[Object(g.jsx)(f,{handleClickButton:function(e){return j(t.name,e)},textSize:"12px"}),Object(g.jsx)(k,{handleClickButton:function(e){return b(t.name,e)}})]})})]}),Object(g.jsx)(Y.a,{children:Object(g.jsxs)(d.a,{className:"mb-4",children:[Object(g.jsxs)(D.a,{children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Region"}),Object(g.jsxs)("div",{children:[t.country,", ",t.region]})]}),Object(g.jsxs)(D.a,{children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Producer"}),Object(g.jsx)("div",{children:t.producer})]}),Object(g.jsxs)(D.a,{children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Bottle"}),Object(g.jsxs)("div",{children:[t.bottleSize,"ml"]})]}),Object(g.jsxs)(D.a,{children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Alcohol"}),Object(g.jsxs)("div",{children:[t.alcohol,"%"]})]})]})}),Object(g.jsxs)("div",{className:"mb-4",children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Description"}),Object(g.jsx)("div",{children:t.description})]}),Object(g.jsxs)("div",{children:[Object(g.jsx)("div",{style:{color:"#CC962C"},children:"Tasting Notes"}),Object(g.jsx)("div",{children:t.tastingNotes})]})]})]}),c&&Object(g.jsxs)(d.a,{className:"text-center justify-content-center",children:[Object(g.jsx)(F.a,{animation:"grow"}),Object(g.jsx)(F.a,{animation:"grow"}),Object(g.jsx)(F.a,{animation:"grow"})]}),s&&Object(g.jsx)(L,{visibleModal:r,handleClose:i,message:a,productName:"",isSuccess:!1}),Object(g.jsx)(L,{visibleModal:h,handleClose:O,message:"is added to cart",productName:o,isSuccess:!0}),Object(g.jsx)(L,{visibleModal:u,handleClose:p,message:"is bookmarked",productName:o,isSuccess:!0})]})},q=function(){return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(p,{}),Object(g.jsx)("div",{style:{justifyContent:"center",marginTop:"142px"},children:Object(g.jsx)(P,{})})]})},U=function(){return Object(g.jsx)(i.a,{children:Object(g.jsxs)(l.c,{children:[Object(g.jsx)(l.a,{path:"/",exact:!0,component:R}),Object(g.jsx)(l.a,{path:"/product/:id",exact:!0,component:q})]})})},G=function(e){var t=e.children,c=Object(n.useState)(!1),s=Object(C.a)(c,2),a=s[0],r=s[1],i=Object(n.useState)(!1),l=Object(C.a)(i,2),o=l[0],j=l[1],d=Object(n.useState)(""),b=Object(C.a)(d,2),h=b[0],u=b[1],O=Object(n.useState)(0),x=Object(C.a)(O,2),m=x[0],p=x[1];return Object(g.jsx)(v.Provider,{value:{handleClickCart:function(e,t){t.preventDefault(),u(e),r(!0),p(m+1)},visibleModal:a,handleClose:function(){return r(!1)},visibleModalBookmark:o,handleClickBookmark:function(e,t){t.preventDefault(),u(e),j(!0)},handleCloseBookmark:function(){return j(!1)},productName:h,countItem:m},children:t})};c(109);var H=function(){return Object(g.jsx)(i.a,{children:Object(g.jsx)(G,{children:Object(g.jsx)(U,{})})})},J=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,113)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(H,{})}),document.getElementById("root")),J()},82:function(e,t,c){}},[[110,1,2]]]);
//# sourceMappingURL=main.b48da986.chunk.js.map