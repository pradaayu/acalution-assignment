{"ast":null,"code":"var _jsxFileName = \"/home/prada/Documents/acalution-assignment/src/components/productlist/ProductListCard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport AddToCartButton from '../AddToCartButton';\nimport BookmarkButton from '../BookmarkButton';\nimport useProductList from './product-list.hooks';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Spinner from 'react-bootstrap/Spinner';\nimport MessageModal from '../MessageModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductCard = () => {\n  _s();\n\n  const [page, setPage] = useState(1);\n  const observer = useRef();\n  const {\n    productList,\n    productName,\n    handleClickCart,\n    handleClickBookmark,\n    visibleModal,\n    visibleModalBookmark,\n    handleClose,\n    handleCloseBookmark,\n    visibleModalError,\n    handleCloseError,\n    loading,\n    error,\n    loadMore,\n    totalPage\n  } = useProductList(page);\n  const lastProductElementRef = useCallback(node => {\n    // console.log('node', node)\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && loadMore) {\n        // console.log('visible')\n        setPage(prevPage => prevPage + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loading, loadMore]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center\",\n      children: [productList.map((item, index) => {\n        if (productList.length === index + 1) {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            ref: lastProductElementRef,\n            value: item,\n            md: 4,\n            sm: 12,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `product/${item.id}`,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                className: \"mb-5\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  className: \"justify-content-md-center\",\n                  md: 3,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        minWidth: '80px'\n                      },\n                      className: \"img-fluid\",\n                      src: item.image,\n                      alt: \"bottle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 47,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 46,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 45,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      height: '150px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        height: '120px',\n                        overflow: 'hidden'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"h5\",\n                        style: {\n                          color: '#842529'\n                        },\n                        children: [item.name, \" \", item.vintageYear !== 0 ? item.vintageYear : '']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 53,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#313131'\n                        },\n                        children: [item.type, \" | \", item.grapeVarietes]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 54,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#313131'\n                        },\n                        children: item.vintageYear === 0 ? 'Non Vintage' : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 55,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#313131'\n                        },\n                        children: [item.country, \", \", item.region]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 56,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 52,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#242424'\n                        },\n                        className: \"h5\",\n                        children: [\"S$\", item.price]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 59,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: item.qty <= 5 ? `${item.qty} Left ` : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 60,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 58,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 51,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Row, {\n                    className: \"ml-1\",\n                    children: [/*#__PURE__*/_jsxDEV(AddToCartButton, {\n                      handleClickButton: e => handleClickCart(item.name, e),\n                      textSize: \"12px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 69,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(BookmarkButton, {\n                      handleClickButton: e => handleClickBookmark(item.name, e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 70,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 50,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 44,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 43,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 20\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(Col, {\n            value: item,\n            md: 4,\n            sm: 12,\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: `product/${item.id}`,\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                className: \"mb-5\",\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  className: \"justify-content-md-center\",\n                  md: 3,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      style: {\n                        minWidth: '80px'\n                      },\n                      className: \"img-fluid\",\n                      src: item.image,\n                      alt: \"bottle\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      height: '150px'\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        height: '120px',\n                        overflow: 'hidden'\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"h5\",\n                        style: {\n                          color: '#842529'\n                        },\n                        children: [item.name, \" \", item.vintageYear !== 0 ? item.vintageYear : '']\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 88,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [item.type, \" | \", item.grapeVarietes]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 89,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: item.vintageYear === 0 ? 'Non Vintage' : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 90,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: [item.country, \", \", item.region]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 91,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 87,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(Row, {\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        style: {\n                          color: '#242424'\n                        },\n                        className: \"h5\",\n                        children: [\"S$\", item.price]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: item.qty <= 5 ? `${item.qty} Left ` : ''\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 95,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 93,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 86,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Row, {\n                    className: \"ml-1\",\n                    children: [/*#__PURE__*/_jsxDEV(AddToCartButton, {\n                      handleClickButton: e => handleClickCart(item.name, e),\n                      textSize: \"12px\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 104,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(BookmarkButton, {\n                      handleClickButton: e => handleClickBookmark(item.name, e)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 105,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 103,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 85,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 21\n          }, this);\n        }\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error && /*#__PURE__*/_jsxDEV(MessageModal, {\n          visibleModal: visibleModalError,\n          handleClose: handleCloseError,\n          message: \"Cannot fetch data. Try again later.\",\n          productName: \"\",\n          isSuccess: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(Row, {\n      className: \"text-center justify-content-center\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"grow\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 11\n    }, this), page === 1 && loadMore ? /*#__PURE__*/_jsxDEV(Row, {\n      className: \"text-center justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"flat\",\n        children: \"Load More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }, this) : '', /*#__PURE__*/_jsxDEV(MessageModal, {\n      visibleModal: visibleModalBookmark,\n      handleClose: handleCloseBookmark,\n      message: \"is bookmarked\",\n      productName: productName,\n      isSuccess: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageModal, {\n      visibleModal: visibleModal,\n      handleClose: handleClose,\n      message: \"is added to cart\",\n      productName: productName,\n      isSuccess: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProductCard, \"nmK3Mmgh3s2pYmmCQ9A8q0C3mDY=\", false, function () {\n  return [useProductList];\n});\n\n_c = ProductCard;\nexport default ProductCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"sources":["/home/prada/Documents/acalution-assignment/src/components/productlist/ProductListCard.jsx"],"names":["React","useState","useRef","useCallback","Link","AddToCartButton","BookmarkButton","useProductList","Row","Col","Button","Spinner","MessageModal","ProductCard","page","setPage","observer","productList","productName","handleClickCart","handleClickBookmark","visibleModal","visibleModalBookmark","handleClose","handleCloseBookmark","visibleModalError","handleCloseError","loading","error","loadMore","totalPage","lastProductElementRef","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","map","item","index","length","id","minWidth","image","height","overflow","color","name","vintageYear","type","grapeVarietes","country","region","price","qty","e"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport AddToCartButton from '../AddToCartButton'\nimport BookmarkButton from '../BookmarkButton'\nimport useProductList from './product-list.hooks'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Button from 'react-bootstrap/Button'\nimport Spinner from 'react-bootstrap/Spinner'\nimport MessageModal from '../MessageModal'\n\nconst ProductCard = () => {\n  const [page, setPage] = useState(1)\n  const observer = useRef()\n  const {\n    productList, productName,\n    handleClickCart, handleClickBookmark,\n    visibleModal, visibleModalBookmark,\n    handleClose, handleCloseBookmark,\n    visibleModalError, handleCloseError, \n    loading, error, loadMore, totalPage\n  } = useProductList(page)\n  const lastProductElementRef = useCallback(node => {\n    // console.log('node', node)\n    if (loading) return\n    if (observer.current) observer.current.disconnect()\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && loadMore) {\n        // console.log('visible')\n        setPage(prevPage => prevPage + 1)\n      }\n    })\n    if (node) observer.current.observe(node)\n  }, [loading, loadMore]) \n\n  return (\n    <>\n      <Row className=\"justify-content-md-center\">\n\n        {productList.map((item, index) => {\n          if (productList.length === index + 1) {\n            return <Col ref={lastProductElementRef} value={item} key={index} md={4} sm={12} >\n                <Link to={`product/${item.id}`}>\n                  <Row className=\"mb-5\">\n                    <Col className=\"justify-content-md-center\" md={3}>\n                      <div>\n                        <img style={{minWidth: '80px'}} className=\"img-fluid\" src={item.image} alt=\"bottle\"/>\n                      </div>\n                    </Col>\n                    <Col>\n                      <div style={{height: '150px'}}>\n                        <div style={{height: '120px', overflow: 'hidden'}}>\n                          <div className=\"h5\" style={{color: '#842529'}}>{item.name} {item.vintageYear !== 0 ? item.vintageYear : ''}</div>\n                          <div style={{color: '#313131'}}>{item.type} | {item.grapeVarietes}</div>\n                          <div style={{color: '#313131'}}>{item.vintageYear === 0 ? 'Non Vintage' : ''}</div>\n                          <div style={{color: '#313131'}}>{item.country}, {item.region}</div>\n                        </div>\n                        <Row>\n                          <div style={{color: '#242424'}} className=\"h5\">S${item.price}</div>\n                          <div>\n                            {\n                              item.qty <= 5 ?\n                              `${item.qty} Left ` : ''\n                            }\n                          </div>\n                        </Row>\n                      </div>\n                      <Row className=\"ml-1\">\n                        <AddToCartButton handleClickButton={(e) => handleClickCart(item.name, e)} textSize=\"12px\"/>                    \n                        <BookmarkButton handleClickButton={(e) => handleClickBookmark(item.name, e)}/>\n                      </Row>\n                    </Col>\n                  </Row>\n                </Link>\n              </Col>\n          } else {\n            return  <Col value={item} key={index} md={4} sm={12} >\n                <Link to={`product/${item.id}`}>\n                  <Row className=\"mb-5\">\n                    <Col className=\"justify-content-md-center\" md={3}>\n                      <div>\n                        <img style={{minWidth: '80px'}} className=\"img-fluid\" src={item.image} alt=\"bottle\"/>\n                      </div>\n                    </Col>\n                    <Col>\n                      <div style={{height: '150px'}}>\n                        <div style={{height: '120px', overflow: 'hidden'}}>\n                          <div className=\"h5\" style={{color: '#842529'}}>{item.name} {item.vintageYear !== 0 ? item.vintageYear : ''}</div>\n                          <div>{item.type} | {item.grapeVarietes}</div>\n                          <div>{item.vintageYear === 0 ? 'Non Vintage' : ''}</div>\n                          <div>{item.country}, {item.region}</div>\n                        </div>\n                        <Row>\n                          <div style={{color: '#242424'}} className=\"h5\">S${item.price}</div>\n                          <div>\n                            {\n                              item.qty <= 5 ?\n                              `${item.qty} Left ` : ''\n                            }\n                          </div>\n                        </Row>\n                      </div>\n                      <Row className=\"ml-1\">\n                        <AddToCartButton handleClickButton={(e) => handleClickCart(item.name, e)} textSize=\"12px\"/>                    \n                        <BookmarkButton handleClickButton={(e) => handleClickBookmark(item.name, e)}/>\n                      </Row>\n                    </Col>\n                  </Row>\n                </Link>\n              </Col>\n          }\n        })}\n\n        <div>\n          {\n            error &&\n            <MessageModal\n              visibleModal={visibleModalError}\n              handleClose={handleCloseError}\n              message=\"Cannot fetch data. Try again later.\"\n              productName=\"\"\n              isSuccess={false}\n            />\n          }\n        </div>\n\n      </Row>\n\n        {\n          loading && \n          <Row className=\"text-center justify-content-center\">\n            <Spinner animation=\"grow\"></Spinner>\n            <Spinner animation=\"grow\"></Spinner>\n            <Spinner animation=\"grow\"></Spinner>\n          </Row>\n        }\n\n      {\n        page === 1 && loadMore ?\n        <Row className=\"text-center justify-content-center\">\n          <Button variant=\"flat\">Load More</Button>\n        </Row>\n        :\n        ''\n      }\n\n      <MessageModal\n        visibleModal={visibleModalBookmark}\n        handleClose={handleCloseBookmark}\n        message=\"is bookmarked\"\n        productName={productName}\n        isSuccess={true}\n      />\n      <MessageModal\n        visibleModal={visibleModal}\n        handleClose={handleClose}\n        message=\"is added to cart\"\n        productName={productName}\n        isSuccess={true}\n      />\n    </>\n  )\n}\n\nexport default ProductCard"]},"metadata":{},"sourceType":"module"}