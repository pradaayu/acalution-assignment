{"ast":null,"code":"var _jsxFileName = \"/home/prada/Documents/acalution-assignment/src/components/productlist/ProductListCard.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useCallback } from 'react';\nimport { Link } from 'react-router-dom';\nimport AddToCartButton from '../AddToCartButton';\nimport BookmarkButton from '../BookmarkButton';\nimport useProductList from './product-list.hooks';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Button from 'react-bootstrap/Button';\nimport Spinner from 'react-bootstrap/Spinner';\nimport MessageModal from '../MessageModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProductCard = () => {\n  _s();\n\n  const [page, setPage] = useState(1);\n  const observer = useRef();\n  const {\n    productList,\n    productName,\n    handleClickCart,\n    handleClickBookmark,\n    visibleModal,\n    visibleModalBookmark,\n    handleClose,\n    handleCloseBookmark,\n    loading,\n    error,\n    loadMore,\n    totalPage\n  } = useProductList(page);\n  const lastProductElementRef = useCallback(node => {\n    console.log('node', node);\n    if (loading) return;\n    if (observer.current) observer.current.disconnect();\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && loadMore) {\n        console.log('visible');\n        setPage(prevPage => prevPage + 1);\n      }\n    });\n    if (node) observer.current.observe(node);\n  }, [loading, loadMore]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      className: \"justify-content-md-center\",\n      children: [productList.map((item, index) => {\n        if (productList.length === index + 1) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Hello\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 20\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Hell no\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 20\n          }, this);\n        }\n      }), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: loading && /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Spinner, {\n            animation: \"grow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n            animation: \"grow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Spinner, {\n            animation: \"grow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error && /*#__PURE__*/_jsxDEV(MessageModal, {\n          visibleModal: visibleModalBookmark,\n          handleClose: handleCloseBookmark,\n          message: \"Cannot fetch data. Try again later.\",\n          productName: \"\",\n          isSuccess: false\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), page === 1 && loadMore ? /*#__PURE__*/_jsxDEV(Row, {\n      className: \"text-center justify-content-center\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"flat\",\n        children: \"Load More\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this) : '', /*#__PURE__*/_jsxDEV(MessageModal, {\n      visibleModal: visibleModalBookmark,\n      handleClose: handleCloseBookmark,\n      message: \"is bookmarked\",\n      productName: productName,\n      isSuccess: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MessageModal, {\n      visibleModal: visibleModal,\n      handleClose: handleClose,\n      message: \"is added to cart\",\n      productName: productName,\n      isSuccess: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ProductCard, \"bi+gxxqJtves+S7NwTVti73GcP8=\", false, function () {\n  return [useProductList];\n});\n\n_c = ProductCard;\nexport default ProductCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"sources":["/home/prada/Documents/acalution-assignment/src/components/productlist/ProductListCard.jsx"],"names":["React","useState","useRef","useCallback","Link","AddToCartButton","BookmarkButton","useProductList","Row","Col","Button","Spinner","MessageModal","ProductCard","page","setPage","observer","productList","productName","handleClickCart","handleClickBookmark","visibleModal","visibleModalBookmark","handleClose","handleCloseBookmark","loading","error","loadMore","totalPage","lastProductElementRef","node","console","log","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPage","observe","map","item","index","length"],"mappings":"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","sourcesContent":["import React, { useState, useRef, useCallback } from 'react'\nimport { Link } from 'react-router-dom'\nimport AddToCartButton from '../AddToCartButton'\nimport BookmarkButton from '../BookmarkButton'\nimport useProductList from './product-list.hooks'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Button from 'react-bootstrap/Button'\nimport Spinner from 'react-bootstrap/Spinner'\nimport MessageModal from '../MessageModal'\n\nconst ProductCard = () => {\n  const [page, setPage] = useState(1)\n  const observer = useRef()\n  const {\n    productList, productName,\n    handleClickCart, handleClickBookmark,\n    visibleModal, visibleModalBookmark,\n    handleClose, handleCloseBookmark, \n    loading, error, loadMore, totalPage\n  } = useProductList(page)\n  const lastProductElementRef = useCallback(node => {\n    console.log('node', node)\n    if (loading) return\n    if (observer.current) observer.current.disconnect()\n    observer.current = new IntersectionObserver(entries => {\n      if (entries[0].isIntersecting && loadMore) {\n        console.log('visible')\n        setPage(prevPage => prevPage + 1)\n      }\n    })\n    if (node) observer.current.observe(node)\n  }, [loading, loadMore]) \n\n  return (\n    <>\n      <Row className=\"justify-content-md-center\">\n\n        {productList.map((item, index) => {\n          if (productList.length === index + 1) {\n            return <div>Hello</div>\n          } else {\n            return <div>Hell no</div>\n          }\n        })}\n\n        {/* {productList.map((item, index) => {\n            if (productList.length === index + 1) {\n              return\n              <Col ref={lastProductElementRef} value={item} key={index} md={4} sm={12} >\n                <Link to={`product/${item.id}`}>\n                  <Row className=\"mb-5\">\n                    <Col className=\"justify-content-md-center\" md={3}>\n                      <div>\n                        <img style={{minWidth: '80px'}} className=\"img-fluid\" src={item.image} alt=\"bottle\"/>\n                      </div>\n                    </Col>\n                    <Col>\n                      <div style={{height: '150px'}}>\n                        <div style={{height: '120px', overflow: 'hidden'}}>\n                          <div className=\"h5\" style={{color: '#842529'}}>{item.name} {item.vintageYear !== 0 ? item.vintageYear : ''}</div>\n                          <div>{item.type} | {item.grapeVarietes}</div>\n                          <div>{item.vintageYear === 0 ? 'Non Vintage' : ''}</div>\n                          <div>{item.country}, {item.region}</div>\n                        </div>\n                        <div className=\"h5\">S${item.price}</div>\n                      </div>\n                      <Row className=\"ml-1\">\n                        <AddToCartButton handleClickButton={(e) => handleClickCart(item.name, e)} textSize=\"12px\"/>                    \n                        <BookmarkButton handleClickButton={(e) => handleClickBookmark(item.name, e)}/>\n                      </Row>\n                    </Col>\n                  </Row>\n                </Link>\n              </Col>\n            } else {\n              return\n              <Col value={item} key={index} md={4} sm={12} >\n                <Link to={`product/${item.id}`}>\n                  <Row className=\"mb-5\">\n                    <Col className=\"justify-content-md-center\" md={3}>\n                      <div>\n                        <img style={{minWidth: '80px'}} className=\"img-fluid\" src={item.image} alt=\"bottle\"/>\n                      </div>\n                    </Col>\n                    <Col>\n                      <div style={{height: '150px'}}>\n                        <div style={{height: '120px', overflow: 'hidden'}}>\n                          <div className=\"h5\" style={{color: '#842529'}}>{item.name} {item.vintageYear !== 0 ? item.vintageYear : ''}</div>\n                          <div>{item.type} | {item.grapeVarietes}</div>\n                          <div>{item.vintageYear === 0 ? 'Non Vintage' : ''}</div>\n                          <div>{item.country}, {item.region}</div>\n                        </div>\n                        <div className=\"h5\">S${item.price}</div>\n                      </div>\n                      <Row className=\"ml-1\">\n                        <AddToCartButton handleClickButton={(e) => handleClickCart(item.name, e)} textSize=\"12px\"/>                    \n                        <BookmarkButton handleClickButton={(e) => handleClickBookmark(item.name, e)}/>\n                      </Row>\n                    </Col>\n                  </Row>\n                </Link>\n              </Col>\n            }\n          }\n        )} */}\n\n        <div>\n          {\n            loading && \n            <Row>\n              <Spinner animation=\"grow\"></Spinner>\n              <Spinner animation=\"grow\"></Spinner>\n              <Spinner animation=\"grow\"></Spinner>\n            </Row>\n          }\n        </div>\n        <div>\n          {\n            error &&\n            <MessageModal\n              visibleModal={visibleModalBookmark}\n              handleClose={handleCloseBookmark}\n              message=\"Cannot fetch data. Try again later.\"\n              productName=\"\"\n              isSuccess={false}\n            />\n          }\n        </div>\n\n      </Row>\n\n      {\n        page === 1 && loadMore ?\n        <Row className=\"text-center justify-content-center\">\n          <Button variant=\"flat\">Load More</Button>\n        </Row>\n        :\n        ''\n      }\n\n      <MessageModal\n        visibleModal={visibleModalBookmark}\n        handleClose={handleCloseBookmark}\n        message=\"is bookmarked\"\n        productName={productName}\n        isSuccess={true}\n      />\n      <MessageModal\n        visibleModal={visibleModal}\n        handleClose={handleClose}\n        message=\"is added to cart\"\n        productName={productName}\n        isSuccess={true}\n      />\n    </>\n  )\n}\n\nexport default ProductCard"]},"metadata":{},"sourceType":"module"}