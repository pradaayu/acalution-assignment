{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { BASE_URL } from '../../constants'; // https://zax5j10412.execute-api.ap-southeast-1.amazonaws.com/dev/api/product/list?page=${currentPage}\n// https://zax5j10412.execute-api.ap-southeast-1.amazonaws.com/dev/api/product/${id}\n\nconst useProductList = page => {\n  _s();\n\n  const [productList, setProductList] = useState([]);\n  const [totalPage, setTotalPage] = useState(0);\n  const [visibleModal, setVisibleModal] = useState(false);\n  const [visibleModalBookmark, setVisibleModalBookmark] = useState(false);\n  const [visibleModalError, setVisibleModalError] = useState(false);\n  const [productName, setProductName] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  const [loadMore, setLoadMore] = useState(false);\n\n  const handleClose = () => setVisibleModal(false);\n\n  const handleOpen = () => setVisibleModal(true);\n\n  const handleCloseBookmark = () => setVisibleModalBookmark(false);\n\n  const handleOpenBookmark = () => setVisibleModalBookmark(true);\n\n  console.log('product list', productList);\n  useEffect(() => {\n    getProductList(page);\n  }, [page]);\n\n  const getProductList = async page => {\n    setLoading(true);\n    setError(false);\n\n    try {\n      const params = {\n        page: page\n      };\n      const res = await axios.get(`${BASE_URL}/list?page=${params.page}`);\n\n      if (res.status === 200) {\n        console.log('result', res);\n        const products = res.data.value.products;\n        setTotalPage(Math.ceil(res.data.value.totalCount / 20));\n        setProductList(prevProductList => {\n          return [...prevProductList, ...products];\n        });\n        setLoadMore(page !== totalPage); // check if there's still data to load\n\n        setLoading(false);\n      }\n    } catch (error) {\n      alert('cannot fetch data', error);\n      setError(true);\n      setVisibleModalError(true); // TODO: make function/state to return error so it can be called in jsx file\n    }\n  };\n\n  const handleClickCart = (name, e) => {\n    console.log('cart button is clicked', name);\n    e.preventDefault();\n    setProductName(name);\n    handleOpen();\n  };\n\n  const handleClickBookmark = (name, e) => {\n    console.log('button is clicked', 'yay');\n    e.preventDefault();\n    setProductName(name);\n    handleOpenBookmark();\n  };\n\n  return {\n    productList,\n    handleClickCart,\n    visibleModal,\n    handleClose,\n    visibleModalBookmark,\n    handleClickBookmark,\n    handleCloseBookmark,\n    productName,\n    loading,\n    error,\n    loadMore,\n    totalPage\n  };\n};\n\n_s(useProductList, \"noPktXf8XkNo5CWLVhMEE4MDvMQ=\");\n\nexport default useProductList;","map":{"version":3,"sources":["/home/prada/Documents/acalution-assignment/src/components/productlist/product-list.hooks.js"],"names":["useEffect","useState","axios","BASE_URL","useProductList","page","productList","setProductList","totalPage","setTotalPage","visibleModal","setVisibleModal","visibleModalBookmark","setVisibleModalBookmark","visibleModalError","setVisibleModalError","productName","setProductName","loading","setLoading","error","setError","loadMore","setLoadMore","handleClose","handleOpen","handleCloseBookmark","handleOpenBookmark","console","log","getProductList","params","res","get","status","products","data","value","Math","ceil","totalCount","prevProductList","alert","handleClickCart","name","e","preventDefault","handleClickBookmark"],"mappings":"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","sourcesContent":["import {useEffect, useState } from 'react'\nimport axios from 'axios'\nimport { BASE_URL } from '../../constants'\n// https://zax5j10412.execute-api.ap-southeast-1.amazonaws.com/dev/api/product/list?page=${currentPage}\n// https://zax5j10412.execute-api.ap-southeast-1.amazonaws.com/dev/api/product/${id}\n\nconst useProductList = (page) => {\n  const [productList, setProductList] = useState([])\n  const [totalPage, setTotalPage] = useState(0)\n  const [visibleModal, setVisibleModal] = useState(false)\n  const [visibleModalBookmark, setVisibleModalBookmark] = useState(false)\n  const [visibleModalError, setVisibleModalError] = useState(false)\n  const [productName, setProductName] = useState('')\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(false)\n  const [loadMore, setLoadMore] = useState(false)\n  const handleClose = () => setVisibleModal(false)\n  const handleOpen = () => setVisibleModal(true)\n  const handleCloseBookmark = () => setVisibleModalBookmark(false)\n  const handleOpenBookmark = () => setVisibleModalBookmark(true)\n  console.log('product list', productList)\n\n  useEffect(() => {\n    getProductList(page)\n  }, [page])\n  const getProductList = async (page) => {\n    setLoading(true)\n    setError(false)\n    try {\n      const params = {\n        page: page,\n      }\n      const res = await axios.get(`${BASE_URL}/list?page=${params.page}`)\n      if (res.status === 200) {\n        console.log('result', res)\n        const products = res.data.value.products\n        setTotalPage(Math.ceil(res.data.value.totalCount / 20))\n        setProductList(prevProductList => {\n          return [...prevProductList, ...products]\n        })\n        setLoadMore(page !== totalPage) // check if there's still data to load\n        setLoading(false)\n      }\n    } catch (error) {\n      alert('cannot fetch data', error)\n      setError(true)\n      setVisibleModalError(true)\n      // TODO: make function/state to return error so it can be called in jsx file\n    }\n  }\n  const handleClickCart = (name, e) => {\n    console.log('cart button is clicked', name)\n    e.preventDefault()\n    setProductName(name)\n    handleOpen()\n  }\n  const handleClickBookmark = (name, e) => {\n    console.log('button is clicked', 'yay')\n    e.preventDefault()\n    setProductName(name)\n    handleOpenBookmark()\n  }\n  return {\n    productList, handleClickCart, visibleModal, handleClose, visibleModalBookmark, handleClickBookmark, handleCloseBookmark, productName,\n    loading, error, loadMore, totalPage\n  }\n}\n\nexport default useProductList"]},"metadata":{},"sourceType":"module"}